<!doctype html>

<html lang="en">

<head>
  <meta charset="utf-8">

  <title>Mocking Text Generator</title>
  <meta name="description" content="Mocking Text Generator">
  <meta name="author" content="Palmer Stolly">

  <style>
    .meme {
      width: auto;
      height: auto;
      margin: 32px auto;
    }

    .memeText {}
  </style>

  <script type="text/javascript" src="html2canvas.min.js"></script>

</head>

<body>
  <script>
    function processText() {
      // Get the input text
      let inputText = document.getElementById("inputText").value;

      // Convert to mocking
      let outputText = "";
      inputText = inputText.toLowerCase();
      let makeUpper = true;
      for (let i = 0; i < inputText.length; i++) {
        let theChar = inputText.charAt(i);
        if (makeUpper) outputText += theChar.toUpperCase();
        else outputText += theChar;
        makeUpper = !makeUpper;
      }

      // Set the output text
      document.getElementById("outputText").innerText = outputText;

      // Set image text
      document.getElementById("memeText").innerText = outputText;

      // TODO process image
      html2canvas(document.getElementById("meme"), {
        allowTaint: false,
        logging: true
      }).then(canvas => {
        document.getElementById("outputMeme").src = canvas.toDataURL("image/png");
      });
    }
  </script>

  <p>@Dea now you don't need to do this manually</p>

  <p>Enter Text:</p>
  <textarea id="inputText" rows="4" cols="64" placeholder="Place your text here..." oninput="processText()"></textarea>

  <hr />

  <p>Output Text:</p>
  <p id="outputText"></p>

  <hr />
  <p>Output Meme:</p>
  <div class="meme" id="meme">
    <p id="memeText" class="memeText"></p>
    <img src="spongebob.png">
  </div>

  <image id="outputMeme"></image>

  <script>
    processText();
  </script>
</body>

</html>